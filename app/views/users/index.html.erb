<section class="users-section">
    <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>View</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
    <% @users.each do |user| %>
      <% if current_user != user %>
        <tr>
        
            <td><%= user.name %> </td>
            <td>
              <div class="buttons">
                <%= link_to user_path(user), class: 'button is-primary is-light' do %>
                  <i class="fas fa-eye mr-2"></i>
                  <span>View Profile</span>
                  <% end %>
              </div>      
            </td>
          <% if current_user.friend?(user) %>
              <td>
                <div class="buttons">
                  <%= link_to friendship_path(user), class: "button is-info is-light", method: :delete, data: {confirm: "Are you sure you want to Unfriend #{user.name}"} do %> 
                  <i class="fas fa-user-plus mr-2"></i>
                  <span>Unfriend</span>
                  <% end %>
                </div>
              </td>
          <% elsif current_user.pending_requests.include?(user) %>
              <td>
                <div class="buttons">
                  <%= link_to friendship_path(user), class: "button is-warning is-light" do %> 
                  <i class="fas fa-user mr-2"></i>
                  <span> Request sent</span>
                  <% end %>
                </div>
              </td>
          <% elsif current_user.friend_requests.include?(user) %>
              <td>
                <div class="buttons">
                  <%= link_to "#", class: "button is-sucess is-light" do %> 
                  <i class="fas fa-user-plus mr-2"></i>
                  <span> Accept </span>
                  <% end %>
                </div>
              </td>
              <td>
                <div class="buttons">
                  <%= link_to "#", class: "button is-danger is-light" do %> 
                  <i class="fas fa-user-plus mr-2"></i>
                  <span> Reject </span>
                  <% end %>
                </div>
            </td>
          <% else %>
            <td>
              <div class="buttons">
                <%= link_to friendships_path(user_id: current_user.id, friend_id: user.id), class: "button is-info is-light", method: :post do %> 
                  <i class="fas fa-user-plus mr-2"></i>
                  <span>Add Friend</span>
                <% end %>
              </div>
            </td>
          <% end %>
        </tr>
      <% end %>
    <% end %>
</tbody>
</table>
</section>
